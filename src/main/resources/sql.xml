<Queries>

    <getUserById>
        SELECT * FROM usertable WHERE id = ?;
    </getUserById>

    <getUserByRiftTag>
        SELECT * FROM usertable WHERE rift_tag = ?;
    </getUserByRiftTag>

    <getNumberFollowingById>
        SELECT COUNT(*)
        FROM following
        WHERE follower_id = ?;
    </getNumberFollowingById>

    <getNumberGamesPlayedByUserId>
        SELECT COUNT(*)
        FROM gamerequest g JOIN riftergame r ON g.session_id = r.id
        WHERE riftee_id = ? AND accepted = true AND r.game_time &lt; current_timestamp
    </getNumberGamesPlayedByUserId>

    <getFollowersById>
        SELECT *
        FROM following
        WHERE following_id = ?;
    </getFollowersById>

    <getFollowingsById>
        SELECT *
        FROM following
        WHERE follower_id = ?;
    </getFollowingsById>

    <getFollowersAndInfoById>
        SELECT *
        FROM following f JOIN usertable u
        ON f.follower_id = u.id
        WHERE f.following_id = ?;
    </getFollowersAndInfoById>

    <getFollowingsAndInfoById>
        SELECT *
        FROM following f JOIN usertable u
        ON f.following_id = u.id
        WHERE f.follower_id = ?;
    </getFollowingsAndInfoById>

    <getNumberFollowersById>
        SELECT COUNT(*)
        FROM following
        WHERE following_id = ?;
    </getNumberFollowersById>

    <getUserActivity>
        SELECT *
        FROM notification
        WHERE creator_id = ?
    </getUserActivity>

    <getUserNotifications>
        SELECT *
        FROM notification
        WHERE user_id = ?
    </getUserNotifications>

    <getUserActiviyAndUserSession>
        SELECT *
        FROM notification n JOIN riftergame r
        ON n.session_id = r.id
        WHERE n.user_id = ?
    </getUserActiviyAndUserSession>

    <getUserAndRifterSessions>
        SELECT *
        FROM riftergame
        WHERE host_id = ?
    </getUserAndRifterSessions>

    <getGameRequestsAndGameInfoByUserId>
        SELECT *
        FROM gamerequest g JOIN riftergame r
        ON g.session_id = r.id
        WHERE g.riftee_id = ?;
    </getGameRequestsAndGameInfoByUserId>

    <getGameRequestsAndHostInfoByUserId>
        SELECT *
        FROM gamerequest g JOIN usertable u
        ON g.host_id = u.id
        WHERE g.riftee_id = ?;
    </getGameRequestsAndHostInfoByUserId>

    <getGameRequestsAndGameInfoAndHostInfoByUserId>
        SELECT *
        FROM gamerequest g JOIN usertable u
        ON g.host_id = u.id
        JOIN riftergame r
        ON g.session_id = r.id
        WHERE g.riftee_id = ?;
    </getGameRequestsAndGameInfoAndHostInfoByUserId>

    <getRequestsByUser>
        SELECT *
        FROM gamerequest
        WHERE riftee_id = ?;
    </getRequestsByUser>

    <getGameRequestsByUserAndAccepted>
        SELECT *
        FROM gamerequest
        WHERE riftee_id = ? AND accepted = ?;
    </getGameRequestsByUserAndAccepted>

    <getGameRequestsAndGameInfoByUserIdAndAccepted>
        SELECT *
        FROM gamerequest g JOIN riftergame r
        ON g.session_id = r.id
        WHERE g.riftee_id = ? AND accepted = ?
    </getGameRequestsAndGameInfoByUserIdAndAccepted>

    <getGameRequestsAndHostInfoByUserIdAndAccepted>
        SELECT *
        FROM gamerequest g JOIN usertable u
        ON g.host_id = u.id
        WHERE g.riftee_id = ? AND accepted = ?;
    </getGameRequestsAndHostInfoByUserIdAndAccepted>

    <getGameRequestsAndHostInfoAndSessionInfoByUserIdAndAccepted>
        SELECT *
        FROM gamerequest g JOIN usertable u
        ON g.host_id = u.id
        JOIN riftergame r
        ON g.session_id = r.id
        WHERE g.riftee_id = ? AND accepted = ?;
    </getGameRequestsAndHostInfoAndSessionInfoByUserIdAndAccepted>

    <getGameRequestsByUserIdAndAccepted>
        SELECT *
        FROM gamerequest
        WHERE riftee_id = ? AND accepted = ?
    </getGameRequestsByUserIdAndAccepted>

    <getBroadcastNotificationsById>
        SELECT n.id, user_id, notification_type, notification_content, session_id, created_time, creator_id,  us.first_name, us.last_name, us.is_private, us.is_suspended, us.profile_picture_path, us.rift_tag, us.riftee_rating, us.rifter_rating
        FROM usertable us JOIN following f ON us.id = f.follower_id
        JOIN notification n ON f.following_id = n.creator_id
        WHERE us.id = ? AND n.notification_type = 'New Game';
    </getBroadcastNotificationsById>

    <getBroadcastNotificationsForFollower>
        SELECT n.id, user_id, notification_type, notification_content, session_id, created_time, creator_id,  u.first_name, u.last_name, u.is_private, u.is_suspended, u.profile_picture_path, u.rift_tag, u.riftee_rating, u.rifter_rating, u.gender, u.auth0_Token
        FROM usertable us JOIN following f ON us.id = f.follower_id
        JOIN notification n ON f.following_id = n.creator_id
        JOIN usertable u ON f.following_id = u.id
        WHERE us.id = ? AND n.notification_type = 'New Game';
    </getBroadcastNotificationsForFollower>

    <createUser>
        INSERT INTO usertable
        (first_name, last_name, rift_tag, is_private, is_suspended, auth0_token)
        VALUES(?, ?, ?, false, false, ?);
    </createUser>

    <getRifterGameById>
        SELECT *
        FROM riftergame
        WHERE id = ?;
    </getRifterGameById>

    <getRifterGameAndHostByGameId>
        SELECT *
        FROM riftergame r JOIN usertable u
        ON r.host_id = u.id
        WHERE r.id = ?
    </getRifterGameAndHostByGameId>

    <getGamePlayersByGameId>
        SELECT u.*
        FROM gamerequest g JOIN usertable u
        ON g.riftee_id = u.id
        WHERE g.session_id = ?
    </getGamePlayersByGameId>

    <createGame>
        INSERT INTO riftergame
        (host_id, num_slots, game_cost, title, game_duration, game_time, game, console, slots_remaining, created_time)
        VALUES(?, ?, ?, ?, ?, ?, ?, ?, ?, ?);
    </createGame>

</Queries>